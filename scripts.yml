version: 1.12.2
name: oak_nest
scripts:
  dev:
    cmd: deno run example/main.ts
    desc: run my main.ts file
    allow:
      - net
      - env
      - write
      - read
    unstable: true
    tsconfig: deno.json
    env:
      PORT: '2000'
      # HTTP_PROXY: "http://localhost"
      # DEBUG: 'true'
  startScheduler:
    cmd: deno run modules/scheduler/example/main.ts
    allow:
      - net
      - env
    unstable: true
    tsconfig: deno.json
    env:
      PORT: '1000'
      # DEBUG: 'true'  
  startCache:
    cmd: deno run --location https://www.baidu.com modules/cache/example/main.ts
    allow:
      - net
      - env
    unstable: true
    tsconfig: deno.json
    env:
      PORT: '1000'
      # DEBUG: 'true'  
  startRedis:
    cmd: deno run modules/redis/example/main.ts
    desc: start redis example
    allow:
      - net
      - env
    unstable: true
    tsconfig: deno.json
    env:
      PORT: '1000'    
  startEs:
    cmd: deno run modules/elasticsearch/example/main.ts
    desc: start elasticsearch example
    allow:
      - net
      - env
    unstable: true
    tsconfig: deno.json
    env:
      PORT: '1000'              
  build:
    cmd: deno bundle example/main.ts example/main.js
    watch: false
    unstable: false
    tsconfig: deno.json
    env:
      NODE_ENV: production
  dist:
    cmd: deno run example/main.js
    desc: run dist server
    allow:
      - net
      - env
      - write
      - read
    unstable: true
    watch: false
    tsconfig: deno.json
    env:
      NODE_ENV: production
      PORT: '2000'
  compile:
    cmd: deno compile -o nest example/main.ts 
    allow:
      - net
      - env
      - write
      - read
    unstable: true
    watch: false
    tsconfig: deno.json
  test:
    cmd: deno test
    watch: false
    unstable: true
    allow:
      - env
    env:
      DEBUG: 'true'  
    tsconfig: deno.json
  cache: 
    cmd: deno cache --lock-write example/main.ts
    watch: false
    unstable: true
    tsconfig: deno.json
    lock: lock.json
  publish: 
    cmd: deno_tag -D
    watch: false
  log: 
    cmd: conventional-changelog -p angular -i CHANGELOG.md -s -r 0
    watch: false    